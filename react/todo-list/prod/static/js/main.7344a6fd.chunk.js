(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){e.exports=a(256)},129:function(e,t,a){},207:function(e,t,a){},209:function(e,t,a){},245:function(e,t,a){},247:function(e,t,a){},254:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(33),c=a(9),r=a(26),o=a(51),l=a(106),d=a(10),u=window.devToolsEnhancer||Object(l.composeWithDevTools)({name:"AppMainWrapper.appRoutes appRoutes",realtime:!0,hostname:"localhost",port:8e3}),p=Object(d.a)(),f=a(8),m=a(107),h=a(35),g=a(20),b=Object(f.combineReducers)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"INIT_CURRENT_LIST":return t.tasks;default:return e}},buffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isPushing:!1,tasks:[]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_BUFFER_ADD":return Object(g.a)({},e,{tasks:Object(h.a)(e.tasks).concat([{taskAction:"add_task",value:t.value}])});case"SAVE_BUFFER_DELETE":return Object(g.a)({},e,{tasks:Object(h.a)(e.tasks).concat([{taskAction:"delete_task",id:t.id}])});case"SAVE_BUFFER_UPDATE":return Object(g.a)({},e,{tasks:Object(h.a)(e.tasks).concat([{taskAction:"update_task",id:t.id,value:t.value}])});case"SAVE_BUFFER_DONE":return Object(g.a)({},e,{tasks:Object(h.a)(e.tasks).concat([{taskAction:"done_task",id:t.id}])});case"BEGIN_PUSHING":return Object(g.a)({},e,{isPushing:!0});case"CLEAR_BUFFER":return{tasks:[],isPushing:!1};default:return e}}}),v=function(e){var t=[m.a,Object(r.routerMiddleware)(p)],a=[f.applyMiddleware.apply(void 0,t),u()];return Object(f.createStore)(Object(r.connectRouter)(p)(b),e,f.compose.apply(void 0,a))}({}),k=a(257),E=function(e){var t=e.getUrls;return s.a.createElement(k.a,null,t().map(function(e,t){var a=e.action,n=e.exact;return delete e.action,delete e.exact,n?s.a.createElement(a,Object.assign({key:t},e,{exact:!0})):s.a.createElement(a,Object.assign({key:t},e))}))},T=a(258),S=a(259),U='\x3c!-- zzz \x3c!--]--\x3e\n<div style="text-align:center;font-size:11px" class="cbalink"><a href="https://www.zzz.com.ua/" title="&#1073;&#1077;&#1089;&#1087;&#1083;&#1072;&#1090;&#1085;&#1099;&#1081; &#1093;&#1086;&#1089;&#1090;&#1080;&#1085;&#1075;">&#1073;&#1077;&#1089;&#1087;&#1083;&#1072;&#1090;&#1085;&#1099;&#1081; &#1093;&#1086;&#1089;&#1090;&#1080;&#1085;&#1075;</a> ZZZ.COM.UA<br/><br/></div>\n<script type="text/javascript" src="//a5.zzz.com.ua/r1.js"><\/script>\n<div class="cumf_bt_form_wrapper" style="display:none">\n<form id="contact_us_mail_feedback" action="/oldTi9QvqM6ytokU9Q8ylQq" method="post">\n    <fieldset>\n        \x3c!-- Form Name --\x3e\n        <legend>Contact Us</legend>\n        \x3c!-- Text input--\x3e\n        <div class="cumf_bt_form-group">\n            <label class="col-md-4 cumf_bt_control-label" for="cumf_bt_name">name</label>\n            <div class="col-md-4">\n                <input id="cumf_bt_name" name="cumf_bt_name" type="text" placeholder="your name" class="cumf_bt_form-control cumf_bt_input-md" required />\n                <span class="cumf_bt_help-block">Please enter your name</span>\n            </div>\n        </div>\n        \x3c!-- Text input--\x3e\n        <div class="cumf_bt_form-group">\n            <label class="col-md-4 cumf_bt_control-label" for="cumf_bt_email">your email</label>\n            <div class="col-md-4">\n                <input id="cumf_bt_email" name="cumf_bt_email" type="text" placeholder="enter your email" class="cumf_bt_form-control cumf_bt_input-md" required />\n                <span class="cumf_bt_help-block">please enter your email</span>\n            </div>\n        </div>\n        \x3c!-- Textarea --\x3e\n        <div class="cumf_bt_form-group">\n            <label class="col-md-4 cumf_bt_control-label" for="cumf_bt_message">your message</label>\n            <div class="col-md-4">\n                <textarea class="cumf_bt_form-control" id="cumf_bt_message" name="cumf_bt_message">Message goes here</textarea>\n            </div>\n        </div>\n        <input type="submit" id="cumf_bt_submit" value="Send"/>\n    </fieldset>\n</form>\n</div>\n\n</body>\x3c!--\x3e',_=function(){return v.getState().tasks},y=function(){return v.getState().buffer},O=function(e,t){console.log("--------------------"),console.log("module: \xabapi - server - index.js\xbb"),console.log("error func: \xab".concat(e,"\xbb")),console.log("error message: ".concat(t)),console.log("--------------------")},j=function(){!function e(t){var a=new FormData;a.append("data",JSON.stringify({isFirstRequest:t,time:+new Date}));return fetch("http://kspase-mailer.zzz.com.ua/test-server/server_getter.php",{method:"POST",body:a}).then(function(e){return e.text()}).then(function(e){return e.replace(U,"").trim()}).then(function(e){try{return JSON.parse(e)}catch(t){return O("getUpdatedList",e),_()}}).catch(function(e){return O("getStartList","problem connect to server, serverAnswer: ".concat(e.message)),_()}).then(function(t){Array.isArray(t)&&I(t),setTimeout(function(){e(!1)},500)})}(!0)},C=function(){y().isPushing||(V(),function e(){var t=y(),a=new FormData;a.append("data",JSON.stringify(t.tasks));fetch("http://kspase-mailer.zzz.com.ua/test-server/server_setter.php",{method:"POST",body:a}).then(function(e){return e.text()}).then(function(e){return e.replace(U,"").trim()}).then(function(e){return"Success"===e||(O("saveOnServer","action: ".concat(t.tasks.action,", serverAnswer: ").concat(e)),!1)}).catch(function(e){return O("saveOnServer","problem connect to server, serverAnswer: ".concat(e.message)),!1}).then(function(t){t?B():setTimeout(e(),500)})}())},x=function(e){return{type:"INIT_CURRENT_LIST",tasks:e}},F=function(){return{type:"BEGIN_PUSHING"}},N=function(){return{type:"CLEAR_BUFFER"}},A=function(e){return{type:"SAVE_BUFFER_ADD",value:e}},R=function(e){return{type:"SAVE_BUFFER_DELETE",id:e}},D=function(e,t){return{type:"SAVE_BUFFER_UPDATE",id:e,value:t}},w=function(e){return{type:"SAVE_BUFFER_DONE",id:e}},I=function(e){v.dispatch(x(e))},V=function(){v.dispatch(F())},B=function(){v.dispatch(N())},z=a(12),P=a.n(z),L=(a(129),{push:function(e){return function(t){t(Object(r.push)(e))}}}),M=Object(c.connect)(function(){return{}},L)(function(e){var t=e.push;return s.a.createElement(P.a,{className:"btnShow",onClick:function(){t("/list")}},"Show list")}),H=a(15),K=a(16),q=a(18),J=a(17),G=a(19),W=a(110),Q=a(53),Z=(a(207),function(e){function t(e){var a;Object(H.a)(this,t),(a=Object(q.a)(this,Object(J.a)(t).call(this,e))).handleUpdateStart=function(){var e=a.props.changeTotalUpdating;a.setState({isCurrentUpdating:!0}),e(!0,function(e){a.setState({scrollTop:e})})},a.handleKeyDown=function(e){13===e.keyCode&&a.state.changingValue.trim()&&a.handleUpdateSave(),27===e.keyCode&&a.handleUpdateCancel()},a.handleTextChange=function(e){a.setState({changingValue:e.target.value})},a.handleUpdateCancel=function(){var e=a.props,t=e.fieldAddTask,n=e.changeTotalUpdating,s=a.state.value;a.setState({isCurrentUpdating:!1,changingValue:s}),a.updatedField=null,t.focus(),n(!1,function(){})},a.handleUpdateSave=function(){var e=a.props,t=e.fieldAddTask,n=e.changeTotalUpdating,s=e.updateTask,i=a.state,c=i.id,r=i.changingValue;a.setState({isCurrentUpdating:!1,value:r}),a.updatedField=null,t.focus(),n(!1,function(){}),s(c,r)},a.handleRemoveTask=function(){var e=a.props,t=e.fieldAddTask,n=e.deleteTask,s=a.state.id;t.focus(),n(s)},a.handleDoneTask=function(){var e=a.props,t=e.fieldAddTask,n=e.doneTask,s=a.state.id;a.setState({isDone:!0}),t.focus(),n(s)};var s=e.taskInfo,i=e.scrollTop,c=e.isScroll;return a.state={scrollTop:i,isScroll:c,isCurrentUpdating:!1,isTotalUpdating:!1,changingValue:s.value,id:s.id,value:s.value,isDone:s.isDone},a.updatedFieldRef=Object(n.createRef)(),a.updatedField=null,a}return Object(G.a)(t,e),Object(K.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){return e.taskInfo.value!==this.props.taskInfo.value&&this.setState({value:e.taskInfo.value,changingValue:e.taskInfo.value}),e.taskInfo.isDone!==this.props.taskInfo.isDone&&this.setState({isDone:e.taskInfo.isDone}),e.isTotalUpdating!==this.props.isTotalUpdating&&this.setState({isTotalUpdating:e.isTotalUpdating}),!0}},{key:"componentDidUpdate",value:function(e,t,a){this.updatedField?this.state.isCurrentUpdating&&this.updatedField.focus():this.updatedFieldRef.current&&(this.updatedField=this.updatedFieldRef.current),e.isScroll!==this.props.isScroll&&(this.setState({isScroll:this.props.isScroll}),this.forceUpdate())}},{key:"render",value:function(){var e=this.state,t=e.isDone,a=e.value,n=e.changingValue,i=e.isCurrentUpdating,c=e.isTotalUpdating,r=e.scrollTop,o=e.isScroll;return s.a.createElement(s.a.Fragment,null,t?s.a.createElement("div",{className:"singleTask",style:{backgroundColor:"#3b9"}},s.a.createElement("div",{className:"taskValue"},a),s.a.createElement("div",{className:"controls ".concat(c||!o?"isUpdating":"notUpdating")},s.a.createElement(P.a,{className:"btn btnRemoveDone",onClick:this.handleRemoveTask,disabled:c},"Remove"))):s.a.createElement("div",{className:"singleTask",style:{backgroundColor:i?"#b9daff":"#ccc"}},i?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"inputWrapper",style:{border:i?"2px solid #55c":"none"}},s.a.createElement("input",{className:"updateTaskField",style:{marginTop:"".concat(6-r,"px")},type:"text",value:n,ref:this.updatedFieldRef,onChange:this.handleTextChange,onKeyDown:this.handleKeyDown,onClick:this.test})),s.a.createElement("div",{className:"controls ".concat(c||!o?"isUpdating":"notUpdating")},s.a.createElement(P.a,{className:"btn btnBig btnUpdateSave",onClick:this.handleUpdateSave,disabled:!n.trim()},"Save"),s.a.createElement(P.a,{className:"btn btnBig btnUpdateCancel",onClick:this.handleUpdateCancel},"Cancel"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"taskValue"},a),s.a.createElement("div",{className:"controls ".concat(c||!o?"isUpdating":"notUpdating")},s.a.createElement(P.a,{className:"btn btnSmall btnDone",onClick:this.handleDoneTask,disabled:c},"Done"),s.a.createElement(P.a,{className:"btn btnSmall btnUpdateBegin",onClick:this.handleUpdateStart,disabled:c},"Update"),s.a.createElement(P.a,{className:"btn btnSmall btnRemove",onClick:this.handleRemoveTask,disabled:c},"Remove")))))}}]),t}(n.Component)),Y={deleteTask:function(e){return function(t){t(R(e)),C()}},doneTask:function(e){return function(t){t(w(e)),C()}},updateTask:function(e,t){return function(a){a(D(e,t)),C()}}},X=Object(c.connect)(function(){return{}},Y)(Z),$=(a(209),function(e){function t(e){var a;return Object(H.a)(this,t),(a=Object(q.a)(this,Object(J.a)(t).call(this,e))).getOrder=function(e){return e.reduce(function(e,t){return e.push(t.id),e},[])},a.changeUpdatingState=function(e,t){a.setState({isTotalUpdating:e}),a.props.changeUpdating(e),e&&t(a.scrollTop)},a.onDragEnd=function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),i=Object(W.a)(s,1)[0];return n.splice(a,0,i),n}(a.state.items,e.source.index,e.destination.index);a.setState({items:t,order:a.getOrder(t)})}},e.getStartList(),a.state={items:[],order:[],isScroll:!1,isTotalUpdating:!1},a.scrollTop=0,a}return Object(G.a)(t,e),Object(K.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){if(this.props.tasks!==e.tasks)if(0===this.props.tasks.length)this.setState({items:e.tasks,order:this.getOrder(e.tasks)}),e.tasks.length>8&&this.setState({isScroll:!0}),e.tasks.length<=8&&this.setState({isScroll:!1});else{var n=[];this.state.order.forEach(function(t){e.tasks.forEach(function(e){e.id===t&&n.push(e)})}),e.tasks.forEach(function(e){var t=!0;n.forEach(function(a){e.id===a.id&&(t=!1)}),t&&n.push(e)}),this.setState({items:n}),!this.state.isScroll&&n.length>8&&this.setState({isScroll:!0}),this.state.isScroll&&n.length<=8&&this.setState({isScroll:!1})}return!0}},{key:"componentDidUpdate",value:function(e,t,a){var n=this,s=document.body.getElementsByClassName("todoList")[0];s&&(s.addEventListener("scroll",function(e){n.scrollTop=e.srcElement.scrollTop}),this.needScrolling&&(this.needScrolling=!1,s.scrollTo(0,s.scrollHeight)),e.tasks.length<this.props.tasks.length&&0!==e.tasks.length&&(this.needScrolling=!0))}},{key:"render",value:function(){var e=this,t=this.props.fieldAddTask,a=this.state,n=a.isTotalUpdating,i=a.items,c=a.isScroll;return s.a.createElement(Q.a,{onDragEnd:this.onDragEnd},s.a.createElement(Q.c,{droppableId:"droppable",isDropDisabled:n},function(a){return s.a.createElement("div",{className:"todoList",ref:a.innerRef,style:{overflowY:n?"hidden":"auto"}},i.map(function(a,i){return s.a.createElement(Q.b,{key:a.id,draggableId:a.id,index:i},function(i){return s.a.createElement("div",Object.assign({className:"taskWrapper",ref:i.innerRef},i.draggableProps,i.dragHandleProps,{style:Object(g.a)({},i.draggableProps.style,{cursor:n?"default":"move"})}),s.a.createElement(X,{taskInfo:a,isTotalUpdating:n,changeTotalUpdating:e.changeUpdatingState,fieldAddTask:t,isScroll:c}))})}),a.placeholder)}))}}]),t}(n.Component)),ee=Object(c.connect)(function(e){return{tasks:_(),getStartList:j}},{})($),te=(a(245),function(e){function t(e){var a;return Object(H.a)(this,t),(a=Object(q.a)(this,Object(J.a)(t).call(this,e))).addNewTaskHandle=function(){a.props.addNewTask(a.state.taskValue),a.addFieldRef.current.focus(),a.setState({taskValue:""})},a.handleTextChange=function(e){a.setState({taskValue:e.target.value})},a.handleKeyDown=function(e){13===e.keyCode&&(a.state.isUpdating||a.addNewTaskHandle())},a.state={taskValue:"",isUpdating:!1},a.addFieldRef=Object(n.createRef)(),a}return Object(G.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){this.props.getAddTaskInput(this.addFieldRef.current),this.addFieldRef.current.focus()}},{key:"shouldComponentUpdate",value:function(e,t,a){return e.isUpdating!==this.props.isUpdating&&this.setState({isUpdating:e.isUpdating}),!0}},{key:"render",value:function(){var e=this.state,t=e.taskValue,a=e.isUpdating;return s.a.createElement("div",{className:"actionsBlock"},s.a.createElement("input",{className:"addTaskField",type:"text",value:t,ref:this.addFieldRef,onChange:this.handleTextChange,onKeyDown:this.handleKeyDown}),s.a.createElement(P.a,{className:"btnAddNew",onClick:this.addNewTaskHandle,disabled:!t.trim()||a},"Add task"))}}]),t}(n.Component)),ae={addNewTask:function(e){return function(t){t(A(e)),C()}}},ne=Object(c.connect)(function(){return{}},ae)(te),se=(a(247),function(e){function t(e){var a;return Object(H.a)(this,t),(a=Object(q.a)(this,Object(J.a)(t).call(this,e))).getAddTaskInput=function(e){a.setState({inputAddTask:e})},a.changeUpdating=function(e){a.setState({isUpdating:e})},a.state={inputAddTask:null,isUpdating:!1},a}return Object(G.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.state,t=e.inputAddTask,a=e.isUpdating;return s.a.createElement("div",{className:"pageTodoList"},s.a.createElement(ee,{fieldAddTask:t,changeUpdating:this.changeUpdating}),s.a.createElement(ne,{getAddTaskInput:this.getAddTaskInput,isUpdating:a}))}}]),t}(n.Component)),ie=function(){var e=[{action:T.a,path:"/",component:M,exact:!0},{action:T.a,path:"/list",component:se,exact:!0}],t=[{action:S.a,from:"/*",to:"/",exact:!1}];return e.concat(t)},ce=Object(o.createMuiTheme)({typography:{useNextVariants:!0}}),re=(a(254),s.a.createElement(function(){return s.a.createElement(c.Provider,{store:v},s.a.createElement(r.ConnectedRouter,{history:p},s.a.createElement(o.MuiThemeProvider,{theme:ce},s.a.createElement(E,{getUrls:ie}))))},null)),oe=document.getElementById("root");Object(i.render)(re,oe)}},[[112,2,1]]]);
//# sourceMappingURL=main.7344a6fd.chunk.js.map